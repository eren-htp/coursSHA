{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\cours\\\\voting-results\\\\src\\\\ResultsDashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\n\n// Interfaces\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ResultsDashboard = () => {\n  _s();\n  const [questionsWithResults, setQuestionsWithResults] = useState([]);\n  const [error, setError] = useState('');\n  const fetchAllData = async () => {\n    try {\n      // 1. Récupérer toutes les questions\n      const questionsResponse = await fetch('http://localhost:3000/questions');\n      const allQuestions = await questionsResponse.json();\n\n      // 2. Pour chaque question, récupérer les résultats\n      const resultsPromises = allQuestions.map(async question => {\n        const resultResponse = await fetch(`http://localhost:3000/votes/results/${question.id}`);\n        const results = await resultResponse.json();\n        return {\n          ...question,\n          results\n        };\n      });\n      const combinedData = await Promise.all(resultsPromises);\n      setQuestionsWithResults(combinedData);\n      setError(''); // Effacer les erreurs précédentes\n    } catch (err) {\n      console.error('Erreur lors de la récupération des données !', err);\n      setError('Impossible de charger les données. Assurez-vous que le backend est en cours d\\'exécution.');\n    }\n  };\n\n  // Premier chargement et rafraîchissement toutes les 5 secondes\n  useEffect(() => {\n    fetchAllData(); // Premier chargement\n    const interval = setInterval(fetchAllData, 5000); // Rafraîchit toutes les 5 secondes\n\n    return () => clearInterval(interval); // Nettoyage\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      fontFamily: 'sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: 'center'\n      },\n      children: \"R\\xE9sultats des Votes en Direct\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red',\n        textAlign: 'center'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this), questionsWithResults.length > 0 ? questionsWithResults.map(item => {\n      const totalVotes = item.results.yes + item.results.no;\n      const yesPercentage = totalVotes > 0 ? item.results.yes / totalVotes * 100 : 0;\n      const noPercentage = totalVotes > 0 ? item.results.no / totalVotes * 100 : 0;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #ccc',\n          padding: '15px',\n          marginBottom: '20px',\n          borderRadius: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Oui: \", item.results.yes, \" votes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              backgroundColor: '#e0e0e0',\n              borderRadius: '4px',\n              overflow: 'hidden',\n              marginTop: '5px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: `${yesPercentage}%`,\n                backgroundColor: '#4CAF50',\n                height: '24px',\n                textAlign: 'center',\n                color: 'white',\n                lineHeight: '24px'\n              },\n              children: [yesPercentage.toFixed(1), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Non: \", item.results.no, \" votes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              backgroundColor: '#e0e0e0',\n              borderRadius: '4px',\n              overflow: 'hidden',\n              marginTop: '5px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: `${noPercentage}%`,\n                backgroundColor: '#f44336',\n                height: '24px',\n                textAlign: 'center',\n                color: 'white',\n                lineHeight: '24px'\n              },\n              children: [noPercentage.toFixed(1), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this);\n    }) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"En attente des r\\xE9sultats...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(ResultsDashboard, \"CFN+wjp2Nv9CvH4uvXZD78Q5ZmI=\");\n_c = ResultsDashboard;\nexport default ResultsDashboard;\nvar _c;\n$RefreshReg$(_c, \"ResultsDashboard\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","ResultsDashboard","_s","questionsWithResults","setQuestionsWithResults","error","setError","fetchAllData","questionsResponse","fetch","allQuestions","json","resultsPromises","map","question","resultResponse","id","results","combinedData","Promise","all","err","console","interval","setInterval","clearInterval","style","padding","fontFamily","children","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","color","length","item","totalVotes","yes","no","yesPercentage","noPercentage","border","marginBottom","borderRadius","text","marginTop","width","backgroundColor","overflow","height","lineHeight","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Documents/cours/voting-results/src/ResultsDashboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\n// Interfaces\ninterface Question {\n  id: number;\n  text: string;\n}\n\ninterface VoteResult {\n  yes: number;\n  no: number;\n}\n\ninterface QuestionWithResults extends Question {\n  results: VoteResult;\n}\n\nconst ResultsDashboard: React.FC = () => {\n  const [questionsWithResults, setQuestionsWithResults] = useState<QuestionWithResults[]>([]);\n  const [error, setError] = useState<string>('');\n\n  const fetchAllData = async () => {\n    try {\n      // 1. Récupérer toutes les questions\n      const questionsResponse = await fetch('http://localhost:3000/questions');\n      const allQuestions: Question[] = await questionsResponse.json();\n\n      // 2. Pour chaque question, récupérer les résultats\n      const resultsPromises = allQuestions.map(async (question) => {\n        const resultResponse = await fetch(`http://localhost:3000/votes/results/${question.id}`);\n        const results: VoteResult = await resultResponse.json();\n        return { ...question, results };\n      });\n\n      const combinedData = await Promise.all(resultsPromises);\n      setQuestionsWithResults(combinedData);\n      setError(''); // Effacer les erreurs précédentes\n    } catch (err) {\n      console.error('Erreur lors de la récupération des données !', err);\n      setError('Impossible de charger les données. Assurez-vous que le backend est en cours d\\'exécution.');\n    }\n  };\n\n  // Premier chargement et rafraîchissement toutes les 5 secondes\n  useEffect(() => {\n    fetchAllData(); // Premier chargement\n    const interval = setInterval(fetchAllData, 5000); // Rafraîchit toutes les 5 secondes\n\n    return () => clearInterval(interval); // Nettoyage\n  }, []);\n\n  return (\n    <div style={{ padding: '20px', fontFamily: 'sans-serif' }}>\n      <h1 style={{ textAlign: 'center' }}>Résultats des Votes en Direct</h1>\n      {error && <p style={{ color: 'red', textAlign: 'center' }}>{error}</p>}\n      {questionsWithResults.length > 0 ? (\n        questionsWithResults.map(item => {\n          const totalVotes = item.results.yes + item.results.no;\n          const yesPercentage = totalVotes > 0 ? (item.results.yes / totalVotes) * 100 : 0;\n          const noPercentage = totalVotes > 0 ? (item.results.no / totalVotes) * 100 : 0;\n\n          return (\n            <div key={item.id} style={{ border: '1px solid #ccc', padding: '15px', marginBottom: '20px', borderRadius: '8px' }}>\n              <h3>{item.text}</h3>\n              <div style={{ marginTop: '10px' }}>\n                <span>Oui: {item.results.yes} votes</span>\n                <div style={{ width: '100%', backgroundColor: '#e0e0e0', borderRadius: '4px', overflow: 'hidden', marginTop: '5px' }}>\n                  <div style={{ width: `${yesPercentage}%`, backgroundColor: '#4CAF50', height: '24px', textAlign: 'center', color: 'white', lineHeight: '24px' }}>\n                    {yesPercentage.toFixed(1)}%\n                  </div>\n                </div>\n              </div>\n              <div style={{ marginTop: '10px' }}>\n                <span>Non: {item.results.no} votes</span>\n                <div style={{ width: '100%', backgroundColor: '#e0e0e0', borderRadius: '4px', overflow: 'hidden', marginTop: '5px' }}>\n                  <div style={{ width: `${noPercentage}%`, backgroundColor: '#f44336', height: '24px', textAlign: 'center', color: 'white', lineHeight: '24px' }}>\n                    {noPercentage.toFixed(1)}%\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })\n      ) : (\n        <p>En attente des résultats...</p>\n      )}\n    </div>\n  );\n};\n\nexport default ResultsDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}